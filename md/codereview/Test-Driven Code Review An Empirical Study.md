# Test-Driven Code Review: An Empirical Study

## Abstract

Test-Driven Code Review (TDR) is a code review practice in which a reviewer inspects a patch by examining the changed test code before the changed production code. Although this practice has been mentioned positively by practitioners in informal literature and interviews, there is no systematic knowledge of its effects, prevalence, problems, and advantages.

测试驱动代码审查 (TDR) 是一种代码审查实践，其中审查者通过在更改生产代码之前检查更改的测试代码来检查补丁。 尽管从业者在非正式文献和访谈中积极提及这种做法，但对其影响、普遍性、问题和优势还没有系统的了解。

In this paper, we aim at empirically understanding whether this practice has an effect on code review effectiveness and how developers’ perceive TDR.We conduct (i) a controlled experiment with 93 developers that perform more than 150 reviews, and (ii) 9 semi-structured interviews and a survey with 103 respondents to gather information on how TDR is perceived. Key results from the experiment show that developers adopting TDR find the same proportion of defects in production code, but more in test code, at the expenses of fewer maintainability issues in production code. Furthermore, we found that most developers prefer to review production code as they deem it more critical and tests should follow from it. Moreover, general poor test code quality and no tool support hinder the adoption of TDR. Public preprint: [https: //doi.org/10.5281/zenodo.2551217], data and materials: [https:// doi.org/10.5281/zenodo.2553139].

